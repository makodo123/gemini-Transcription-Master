name: Secret Scan

on:
  push:
  pull_request:

jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Scan for Google API keys
        run: |
          set -e
          if grep -RInE 'AIzaSy[0-9A-Za-z_-]{20,}' . \
            --exclude-dir=.git \
            --exclude-dir=node_modules \
            --exclude-dir=dist; then
            echo "Potential API key found";
            exit 1;
          fi
          echo "No Google API key pattern found"
